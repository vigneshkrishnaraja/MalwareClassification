function [fout] = readAndProcessBinaryFile(fname)
%Syntax: [fout] = readAndProcessBinaryFile(fname)
%
% This function reads the binary file and converts the hex values to
% decimal values. It also resizes it to 256x16 and puts it in a column
% vector.
% Note: It replaces '??' to '-1'
% Required Input Arguments: fname - Binary file name
% 
% Output Arguments: fout - column vector
fid = fopen(fname,'r');
data = textscan(fid,'%s','delimiter','\n');
fout = 0;
for i=1:size(data{1},1)
    line = data{1}(i);
    line = cell2mat(line);
    line = strrep(line(9:end),'??','-1');
    for i=1:3:size(line,2)-1
        A = line(i:i+2);
        if strcmp(A,' -1')
            fout = [fout str2double(A)];
        else
            fout = [fout hex2dec(A)];
        end
    end
end
fout = fout(2:end);
fout = imresize(fout,[256 16]);
fout = fout(:).';
fclose(fid);
end